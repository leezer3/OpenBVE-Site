<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8"/>
    <title>openBVE Documentation</title>
    <link rel="icon" href="../../favicon.png">
    <link rel="stylesheet" href="../../css/theme.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=0.5, maximum-scale=3.0">
    <meta name="langmeta-current" content="ja" />
    
    <meta name="langmeta-translation" content="ca" />
    <meta name="langmeta-translation" content="en" />
    <meta name="langmeta-translation" content="es_mx" />
    <meta name="langmeta-translation" content="fr" />
    <meta name="langmeta-translation" content="hu" />
    <meta name="langmeta-translation" content="id" />
    <meta name="langmeta-translation" content="ko" />
    <meta name="langmeta-translation" content="zh_cn" />
    <meta name="langmeta-translation" content="zh_hk" />
    <script src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js"></script>
    <script src="../../script/script.js"></script>
    <script defer src="https://cdn.staticfile.org/font-awesome/5.3.1/js/all.js"></script>
    <meta name="generator" content="Hugo 0.66.0" />

  </head>
  <body>

    <div id="sidebar" class="responsive-menu responsive-hide">

      
      <div id="site-logo">
          <img alt="Site logo" src="../../images/logo.png">
      </div>
      
      <div class="menu-entries sidebar-language-list">
        <ul class="first" style="padding-bottom:10px">
        <li style="color:black; cursor:pointer" onclick="javascript:toggleLanguageMenu()"><span class="icon">
            <i class="fas fa-angle-down" aria-hidden="true"></i>
          </span>Language</li>
        <ul class="third" style="padding-top:0" id="sidebar-language-menu">
          <li><a href="../../ja/routes/tutorial_ats.html">日本語</a></li>
          <hr style="margin:0.2em 0" />
          
          <li><a href="../../ca/routes/tutorial_ats.html">Català</a></li>
          
          <li><a href="../../en/routes/tutorial_ats.html">English</a></li>
          
          <li><a href="../../es_mx/routes/tutorial_ats.html">Español (México)</a></li>
          
          <li><a href="../../fr/routes/tutorial_ats.html">Français</a></li>
          
          <li><a href="../../hu/routes/tutorial_ats.html">Magyar</a></li>
          
          <li><a href="../../id/routes/tutorial_ats.html">Bahasa Indonesia</a></li>
          
          <li><a href="../../ko/routes/tutorial_ats.html">한국어</a></li>
          
          <li><a href="../../zh_cn/routes/tutorial_ats.html">中文 (大陆简体)</a></li>
          
          <li><a href="../../zh_hk/routes/tutorial_ats.html">中文 (港澳繁體)</a></li>
          
        </ul>
        </ul>
      </div>

      <nav>

<div id="menu-entries">
  <ul class="first">
    
    
    
    <li>オブジェクト
      
      <ul class="second">
        
        <li>独自のフォーマット
          
          <ul class="third">
            
            <li><a href="../../ja/objects/native/b3d.html">B3D オブジェクト</a>
              
            </li>
            
            <li><a href="../../ja/objects/native/csv.html">CSVオブジェクト</a>
              
            </li>
            
            <li><a href="../../ja/objects/native/animated.html">The ANIMATED object</a>
              
            </li>
            
            
              
            </li>
            
            
              
            </li>
            
            
              
            </li>
            
          </ul>
          
        </li>
        
        <li>その他のフォーマット
          
          <ul class="third">
            
            <li><a href="../../ja/objects/other/loksim.html">Loksim3D (.l3dobj)</a>
              
            </li>
            
            <li><a href="../../ja/objects/other/x.html">Microsoft DirectX (.x)</a>
              
            </li>
            
            <li><a href="../../ja/objects/other/msts.html">Microsoft Train Simulator (.s)</a>
              
            </li>
            
            <li><a href="../../ja/objects/other/obj.html">Wavefront (.obj)</a>
              
            </li>
            
          </ul>
          
        </li>
        
        <li><a href="../../ja/objects/information.html">情報とヒント</a>
          
        </li>
        
      </ul>
      
    </li>
    
    <li>路線
      
      <ul class="second">
        
        <li><a href="../../ja/routes/csv.html">CSVルート</a>
          
        </li>
        
        
          
          <ul class="third">
            
            <li><a href="../../ja/routes/xml/dynamiclight.html">Adding Dynamic Lighting</a>
              
            </li>
            
            <li><a href="../../ja/routes/xml/dynamicbackground.html">Dynamic and Object Based Backgrounds</a>
              
            </li>
            
            <li><a href="../../ja/routes/xml/route_marker.html">Scripted Markers</a>
              
            </li>
            
            <li><a href="../../ja/routes/xml/stationxml.html">XML Stations &amp; Request Stops</a>
              
            </li>
            
            <li><a href="../../ja/routes/xml/trackfollowingobject.html">Track Following Object</a>
              
            </li>
            
          </ul>
          
        </li>
        
        <li><a href="../../ja/routes/micsounds.html">マイク入力からサウンドを再生する</a>
          
        </li>
        
        <li><a href="../../ja/routes/rw.html">The RW route</a>
          
        </li>
        
        <li><a href="../../ja/routes/tutorial_ats.html">Tutorial: Using ATS</a>
          
        </li>
        
        <li><a href="../../ja/routes/tutorial_atc.html">チュートリアル: ATCの使用</a>
          
        </li>
        
        
          
        </li>
        
        
          
        </li>
        
        
          
        </li>
        
      </ul>
      
    </li>
    
    <li>車両
      
      <ul class="second">
        
        <li><a href="../../ja/trains/overview.html">概要</a>
          
        </li>
        
        <li><a href="../../ja/trains/train_dat.html">train.datファイル</a>
          
        </li>
        
        <li><a href="../../ja/trains/train_xml.html">train.xmlファイル</a>
          
        </li>
        
        
          
          <ul class="third">
            
            <li><a href="../../ja/trains/xml/sound.html">The sound.xml file</a>
              
            </li>
            
          </ul>
          
        </li>
        
        <li><a href="../../ja/trains/extensions_cfg.html">The extensions.cfg file</a>
          
        </li>
        
        <li><a href="../../ja/trains/panel_cfg.html">The panel.cfg file</a>
          
        </li>
        
        <li><a href="../../ja/trains/panel_animated.html">panel.animatedファイル</a>
          
        </li>
        
        <li><a href="../../ja/trains/panel2_cfg.html">panel2.cfg ファイル</a>
          
        </li>
        
        <li><a href="../../ja/trains/default_sounds.html">Default sounds</a>
          
        </li>
        
        <li><a href="../../ja/trains/openbveats.html">The OpenBveAts Plugin</a>
          
        </li>
        
        <li><a href="../../ja/trains/sound_cfg.html">The sound.cfg file</a>
          
        </li>
        
        <li><a href="../../ja/trains/ats_cfg.html">ats.cfgファイル</a>
          
        </li>
        
        <li><a href="../../ja/trains/plugins.html">Train plugins</a>
          
          <ul class="third">
            
            
              
            </li>
            
          </ul>
          
        </li>
        
        <li><a href="../../ja/trains/information.html">情報とヒント</a>
          
        </li>
        
        
          
        </li>
        
        
          
        </li>
        
        
          
        </li>
        
        
          
        </li>
        
      </ul>
      
    </li>
    
    <li>プラグイン
      
      <ul class="second">
        
        <li><a href="../../ja/plugins/overview.html">概要</a>
          
        </li>
        
        
          
        </li>
        
        
          
        </li>
        
      </ul>
      
    </li>
    
    <li>インフォメーション
      
      <ul class="second">
        
        <li><a href="../../ja/information/encodings.html">文字エンコード</a>
          
        </li>
        
        <li><a href="../../ja/information/numberformats.html">数値の形式</a>
          
        </li>
        
        <li><a href="../../ja/information/whitespaces.html">White Spaces</a>
          
        </li>
        
        <li><a href="../../ja/information/textureformats.html">Texture formats</a>
          
        </li>
        
        <li><a href="../../ja/information/soundformats.html">Sound formats</a>
          
        </li>
        
        <li><a href="../../ja/information/standards.html">Standards</a>
          
        </li>
        
        <li><a href="../../ja/information/distribution.html">アドオンの配布</a>
          
        </li>
        
        <li><a href="../../ja/information/forking.html">フォークのガイドライン</a>
          
        </li>
        
        <li><a href="../../ja/information/bve.html">対BVE Trainsim</a>
          
        </li>
        
      </ul>
      
    </li>
    
    <li>ツール群
      
      <ul class="second">
        
        <li><a href="../../ja/tools/objectviewer.html">オブジェクトビューア</a>
          
        </li>
        
        <li><a href="../../ja/tools/objectbender.html">オブジェクトベンダー</a>
          
        </li>
        
        <li><a href="../../ja/tools/routeviewer.html">ルートビューアー</a>
          
        </li>
        
        <li><a href="../../ja/tools/traineditor.html">車両エディタ</a>
          
        </li>
        
      </ul>
      
    </li>
    
    <li>追加の例
      
      <ul class="second">
        
        <li><a href="../../ja/examples/demoroute.html">デモンストレーション路線</a>
          
        </li>
        
      </ul>
      
    </li>
    
  </ul>
</div>
</nav>

    </div>

    <div class="floating-action-button responsive-show" role="button" onclick="javascript:toggleMenu()">
        <i class="fas fa-bars" aria-hidden="true"></i>
    </div>

    <div id="container">

        <div id="page-title">
          <h1>Tutorial: Using ATS-SN and ATS-P in a CSV route file</h1>
        </div>

        




<div id="content">
  <p>This tutorial is intended to guide you on how to properly set up the built-in Japanese safety systems ATS-SN and ATS-P in the case you want to make your route ready to use them. This page assumes that you are familiar with what ATS-SN and ATS-P are. If not, please take a look at the following page first:</p>
<p><a href="https://openbve-project.net/play-japanese/">運転方法 - コントロール、ATS/ATC、信号、標識の概要</a></p>
<h2 id="-setting-up-a-route-for-ats-sn">■ Setting up a route for ATS-SN</h2>
<p>For ATS-S, an S-type transponder is usually placed 600 meters in front of a red signal. The distance can of course vary with the operation speed used on the route, but is a good start for speeds up to 100 km/h. For ATS-SN, the SN-transponder is additionally placed around 20 meters in front of the signal.</p>
<h3 id="-when-the-signal-interval-is-larger-than-600-meters">● When the signal interval is larger than 600 meters</h3>
<p><img src="../../images/illustration_transponder_setup_atssn.png" alt="illustration_transponder_setup_atssn"></p>
<p>In the case that your signals are at least 600 meters apart from each other, the setup is quite easy. Place a <strong>Track.Tr 0</strong> command around 600 meters in front of any signal, and a <strong>Track.Tr 1</strong> command around 20 meters in front of any signal:</p>
<div class="overflow-container">
<table style="border: none;">
<tbody>
<tr>
<td width="16" valign="top">▶</td>
<td bgcolor="#D4D8FF" style="border: 1px dashed;">
<font style="font-family: monospace">
With Track<br>
0200, .Tr 0<br>
0780, .Tr 1<br>
0800, .Signal 3;;-3;-1
</font>
</td>
</tr>
</tbody>
</table>
</div>
<h3 id="-when-the-signal-interval-is-smaller-than-600-meters">● When the signal interval is smaller than 600 meters</h3>
<p>When signals are in placed smaller intervals, it can become necessary that an S-type transponder is placed in front of one signal, while it actually needs to reference the signal following that one. In this case, it is necessary to indicate which upcoming signal a transponder is supposed to reference. Via a <strong>Track.Tr <em>type</em>; 0</strong> command, the immediately following signal is referenced, while via <strong>Track.Tr <em>type</em>; 1</strong>, the signal following that one is referenced.</p>
<p><img src="../../images/illustration_transponder_setup_atssn_overlap.png" alt="illustration_transponder_setup_atssn_overlap"></p>
<p>Your code will then need to follow this scheme:</p>
<div class="overflow-container">
<table style="border: none;">
<tbody>
<tr>
<td width="16" valign="top">▶</td>
<td bgcolor="#D4D8FF" style="border: 1px dashed;">
<font style="font-family: monospace">
With Track<br>
0200, .Tr 0<br>
0700, .Tr 0;1 ,; referencing signal B<br>
0780, .Tr 1<br>
0800, .Signal 3;;-3;-1 ,; signal A<br>
1280, .Tr 1<br>
1300, .Signal 3;;-3;-1 ,; signal B
</font>
</td>
</tr>
</tbody>
</table>
</div>
<h2 id="-setting-up-a-route-for-ats-p">■ Setting up a route for ATS-P</h2>
<p>For ATS-P, the first pattern renewal transponder is usually placed 600 meters in front of each signal, which can also vary with the operation speed. The pattern renewal transponder is usually repeated a few times so that in the case the aspect of the signal changes, the train can be informed about the change without having to apply the brakes for too long. The pattern renewal transponder is usually placed 600 meters, 280 meters, 180 meters, 85 meters or 50 meters in front of signals, while an immediate stop transponder is usually placed either 25 meters or 30 meters in front of each signal. Which transponders are located where usually depends on the type of the signal. The following is only an example.</p>
<div class="overflow-container">
<table class='type0'>
<thead>
<tr>
<th>Signal</th>
<th>600m</th>
<th>280m</th>
<th>180m</th>
<th>85m</th>
<th>50m</th>
<th>30m</th>
<th>25m</th>
</tr>
</thead>
<tbody>
<tr>
<td>Departure signal</td>
<td><font color="green">✓</font></td>
<td><font color="green">✓</font></td>
<td><font color="green">✓</font></td>
<td><font color="green">✓</font></td>
<td><font color="green">✓</font></td>
<td><font color="red">✗</font></td>
<td><font color="green">✓</font></td>
</tr>
<tr>
<td>Block signal</td>
<td><font color="green">✓</font></td>
<td><font color="red">✗</font></td>
<td><font color="green">✓</font></td>
<td><font color="green">✓</font></td>
<td><font color="red">✗</font></td>
<td><font color="green">✓</font></td>
<td><font color="red">✗</font></td>
</tr>
<tr>
<td>Home signal</td>
<td><font color="green">✓</font></td>
<td><font color="green">✓</font></td>
<td><font color="green">✓</font></td>
<td><font color="green">✓</font></td>
<td><font color="green">✓</font></td>
<td><font color="green">✓</font></td>
<td><font color="red">✗</font></td>
</tr>
</tbody>
</table>
</div>
<p>Departure signals are those placed at the end of a station, block signals are signals in-between stations, and home signals are those immediately placed before stations.</p>
<h3 id="-when-the-signal-interval-is-larger-than-600-meters-1">● When the signal interval is larger than 600 meters</h3>
<p><img src="../../images/illustration_transponder_setup_atsp.png" alt="illustration_transponder_setup_atsp"></p>
<p>In the case that your signals are at least 600 meters apart from each other, the setup is quite easy. Place <strong>Track.Tr 3</strong> commands around 600 meters, 280 meters, 180 meters, 85 meters and 50 meters, depending on the requirements, in front of any signal, and a <strong>Track.Tr 4</strong> command around 25 meters in front of any signal:</p>
<div class="overflow-container">
<table style="border: none;">
<tbody>
<tr>
<td width="16" valign="top">▶</td>
<td bgcolor="#D4D8FF" style="border: 1px dashed;">
<font style="font-family: monospace">
With Track<br>
0200, .Tr 3 ,; 600m<br>
0520, .Tr 3 ,; 280m<br>
0620, .Tr 3 ,; 180m<br>
0715, .Tr 3 ,; 85m<br>
0750, .Tr 3 ,; 50m<br>
0775, .Tr 4 ,; 25m<br>
0800, .Signal 3;;-3;-1
</font>
</td>
</tr>
</tbody>
</table>
</div>
<h3 id="-when-the-signal-interval-is-smaller-than-600-meters-1">● When the signal interval is smaller than 600 meters</h3>
<p>When signals are placed in shorter intervals, you need to be a little more careful on how to place the transponders if they need to reference signals following the immediately upcoming one. Whenever you reference signals beyond the immediately upcoming one with pattern renewal transponders or immediate stop transponders, the first signal until then which is red is referenced. This means that if you use <strong>Track.Tr <em>type</em>;1</strong>, but the immediately upcoming signal is red, that signal will be referenced. Only otherwise, the signal behind that is referenced. Take a look at the following illustration depicting how to set up ATS-P in the case of overlapping signal ranges:</p>
<p><img src="../../images/illustration_transponder_setup_atsp_overlap.png" alt="illustration_transponder_setup_atsp_overlap"></p>
<p>The corresponding code could look something like this:</p>
<div class="overflow-container">
<table style="border: none;">
<tbody>
<tr>
<td width="16" valign="top">▶</td>
<td bgcolor="#D4D8FF" style="border: 1px dashed;">
<font style="font-family: monospace">
0200, .Tr 3 ,; 600m<br>
0520, .Tr 3 ,; 280m<br>
0620, .Tr 3;1 ,; 180m (signal A); 605m (signal B)<br>
0775, .Tr 4 ,; 25m (signal A);<br>
0777, .Tr 3;1 ,; 23m (signal A); 448m (signal B)<br>
0800, .Signal 3;;-3;-1 ,; signal A<br>
0945, .Tr 3 ,; 280m<br>
1045, .Tr 3 ,; 180m<br>
1140, .Tr 3 ,; 85m<br>
1175, .Tr 3 ,; 50m<br>
1200, .Tr 4 ,; 25m<br>
1225, .Signal 3;;-3;-1, ; signal B
</font>
</td>
</tr>
</tbody>
</table>
</div>
<p>This code is simplified in that you would likely also want to include transponders for signal A at 85m and 50m, which you can do by using additional <strong>Track.Tr 3;1</strong> commands.</p>
<h2 id="-setting-up-a-route-for-both-ats-sn-and-ats-p">■ Setting up a route for both ATS-SN and ATS-P</h2>
<p>Often, a route equipped with ATS-P additionally employs equipment for ATS-SN, be it for trains not equipped with ATS-P, or as a fallback should ATS-P suffer from a failure. Normally, any of the S-type or SN-type transponders will activate the ATS-SN system, while any of the pattern renewal or immediate stop transponders will activate ATS-P. In order for an ATS-P-equipped train to stay in ATS-P operation all the time, you should set up all ATS-SN-related transponders to not change the current safety system. This can be done via <strong>Track.Tr <em>type</em>; <em>signal</em>; -1</strong>.</p>
<p><img src="../../images/illustration_transponder_setup_atsp_atssn.png" alt="illustration_transponder_setup_atsp_atssn"></p>
<p>You should make sure that no two transponders occupy the same location. Both the S-type and the pattern renewal transponders are usually placed 600 meters in front of each signal. If you place the pattern renewal transponder first, ATS-P can activate if not already active, and the subsequent S-type transponder will have no effect on a train equipped with ATS-P. Your code will thus need to follow this scheme:</p>
<div class="overflow-container">
<table style="border: none;">
<tbody>
<tr>
<td width="16" valign="top">▶</td>
<td bgcolor="#D4D8FF" style="border: 1px dashed;">
<font style="font-family: monospace">
With Track<br>
0195, .Tr 3<br>
0200, .Tr 0;;-1<br>
0520, .Tr 3<br>
0620, .Tr 3<br>
0715, .Tr 3<br>
0750, .Tr 3<br>
0775, .Tr 4<br>
0780, .Tr 1;;-1<br>
0800, .Signal 3;;-3;-1
</font>
</td>
</tr>
</tbody>
</table>
</div>
<p>If the signal distance is shorter than 600 meters, you should additionally employ the techniques described in the respective sections for ATS-SN and ATS-P.</p>
<h2 id="-setting-up-a-route-for-the-use-of-accidental-departure-transponders">■ Setting up a route for the use of accidental departure transponders</h2>
<p>駅では、列車が赤信号の時に誤出発を防止をするトランスポンダを、停止位置目標の少し先に設置される場合があります。列車の保安装置が現在ATS-SNか、またはATS-Pで有るかにかかわらず、ご出発防止のトランスポンダがトリガーされます。駅ごとに複数の停止位置目標を設置でき、其々が特定の車両の数に関連付けられているため、誤出発防止トランスポンダは列車が停止する予定の停止位置目標の後ろに設置されている場合にのみトリガーされます。</p>
<p>You can employ the accidental departure transponder in the following way:</p>
<div class="overflow-container">
<table style="border: none;">
<tbody>
<tr>
<td width="16" valign="top">▶</td>
<td bgcolor="#D4D8FF" style="border: 1px dashed;">
<font style="font-family: monospace">
0100, .Sta<br>
0178, .Stop 1;;;4<br>
0180, .Tr 2<br>
0212, .Stop 1;;;6<br>
0214, .Tr 2<br>
0246, .Stop 1;;;8<br>
0248, .Tr 2<br>
0280, .Stop 1;;;10<br>
0282, .Tr 2<br>
0300, .Signal 3;;-3;-1
</font>
</td>
</tr>
</tbody>
</table>
</div>
<p>If, in this code example, your train had a length of 8 cars, the transponders at 248 and 282 would bring the train to a hold immediately if the upcoming signal at 300 is red.</p>

</div>

      <div id="footer">

      </div>

    </div>

  </body>
</html>

