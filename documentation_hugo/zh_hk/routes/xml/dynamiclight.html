<!DOCTYPE html>
<html lang="zh_hk">
  <head>
    <meta charset="utf-8"/>
    <title>openBVE Documentation</title>
    <link rel="icon" href="../../../favicon.png">
    <link rel="stylesheet" href="../../../css/theme.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=0.5, maximum-scale=3.0">
    <meta name="langmeta-current" content="zh_hk" />
    
    <meta name="langmeta-translation" content="ca" />
    <meta name="langmeta-translation" content="en" />
    <meta name="langmeta-translation" content="es_mx" />
    <meta name="langmeta-translation" content="fr" />
    <meta name="langmeta-translation" content="hu" />
    <meta name="langmeta-translation" content="id" />
    <meta name="langmeta-translation" content="ja" />
    <meta name="langmeta-translation" content="ko" />
    <meta name="langmeta-translation" content="zh_cn" />
    <script src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js"></script>
    <script src="../../../script/script.js"></script>
    <script defer src="https://cdn.staticfile.org/font-awesome/5.3.1/js/all.js"></script>
    <meta name="generator" content="Hugo 0.66.0" />

  </head>
  <body>

    <div id="sidebar" class="responsive-menu responsive-hide">

      
      <div id="site-logo">
          <img alt="Site logo" src="../../../images/logo.png">
      </div>
      
      <div class="menu-entries sidebar-language-list">
        <ul class="first" style="padding-bottom:10px">
        <li style="color:black; cursor:pointer" onclick="javascript:toggleLanguageMenu()"><span class="icon">
            <i class="fas fa-angle-down" aria-hidden="true"></i>
          </span>Language</li>
        <ul class="third" style="padding-top:0" id="sidebar-language-menu">
          <li><a href="../../../zh_hk/routes/xml/dynamiclight.html">中文 (港澳繁體)</a></li>
          <hr style="margin:0.2em 0" />
          
          <li><a href="../../../ca/routes/xml/dynamiclight.html">Català</a></li>
          
          <li><a href="../../../en/routes/xml/dynamiclight.html">English</a></li>
          
          <li><a href="../../../es_mx/routes/xml/dynamiclight.html">Español (México)</a></li>
          
          <li><a href="../../../fr/routes/xml/dynamiclight.html">Français</a></li>
          
          <li><a href="../../../hu/routes/xml/dynamiclight.html">Magyar</a></li>
          
          <li><a href="../../../id/routes/xml/dynamiclight.html">Bahasa Indonesia</a></li>
          
          <li><a href="../../../ja/routes/xml/dynamiclight.html">日本語</a></li>
          
          <li><a href="../../../ko/routes/xml/dynamiclight.html">한국어</a></li>
          
          <li><a href="../../../zh_cn/routes/xml/dynamiclight.html">中文 (大陆简体)</a></li>
          
        </ul>
        </ul>
      </div>

      <nav>

<div id="menu-entries">
  <ul class="first">
    
    
    
    <li>物件
      
      <ul class="second">
        
        <li>原格式
          
          <ul class="third">
            
            <li><a href="../../../zh_hk/objects/native/b3d.html">B3D 物件</a>
              
            </li>
            
            <li><a href="../../../zh_hk/objects/native/csv.html">CSV 物件</a>
              
            </li>
            
            <li><a href="../../../zh_hk/objects/native/animated.html">ANIMATED 物件</a>
              
            </li>
            
            
              
            </li>
            
            
              
            </li>
            
            
              
            </li>
            
          </ul>
          
        </li>
        
        <li>其他格式
          
          <ul class="third">
            
            <li><a href="../../../zh_hk/objects/other/loksim.html">Loksim3D (.l3dobj)</a>
              
            </li>
            
            <li><a href="../../../zh_hk/objects/other/x.html">Microsoft DirectX (.x)</a>
              
            </li>
            
            <li><a href="../../../zh_hk/objects/other/msts.html">微軟列車模擬器 (.s)</a>
              
            </li>
            
            <li><a href="../../../zh_hk/objects/other/obj.html">Wavefront (.obj)</a>
              
            </li>
            
          </ul>
          
        </li>
        
        <li><a href="../../../zh_hk/objects/information.html">參考資料同提示。</a>
          
        </li>
        
      </ul>
      
    </li>
    
    <li>路線
      
      <ul class="second">
        
        <li><a href="../../../zh_hk/routes/csv.html">CSV 路線</a>
          
        </li>
        
        
          
          <ul class="third">
            
            <li><a href="../../../zh_hk/routes/xml/dynamiclight.html">Adding Dynamic Lighting</a>
              
            </li>
            
            <li><a href="../../../zh_hk/routes/xml/dynamicbackground.html">Dynamic and Object Based Backgrounds</a>
              
            </li>
            
            <li><a href="../../../zh_hk/routes/xml/route_marker.html">Scripted Markers</a>
              
            </li>
            
            <li><a href="../../../zh_hk/routes/xml/stationxml.html">XML Stations &amp; Request Stops</a>
              
            </li>
            
            <li><a href="../../../zh_hk/routes/xml/trackfollowingobject.html">軌道跟隨物件</a>
              
            </li>
            
          </ul>
          
        </li>
        
        <li><a href="../../../zh_hk/routes/micsounds.html">播放麥克風聲音</a>
          
        </li>
        
        <li><a href="../../../zh_hk/routes/rw.html">RW 路線</a>
          
        </li>
        
        <li><a href="../../../zh_hk/routes/tutorial_ats.html">Tutorial: Using ATS</a>
          
        </li>
        
        <li><a href="../../../zh_hk/routes/tutorial_atc.html">教學：使用ATC</a>
          
        </li>
        
        
          
        </li>
        
        
          
        </li>
        
        
          
        </li>
        
      </ul>
      
    </li>
    
    <li>列車
      
      <ul class="second">
        
        <li><a href="../../../zh_hk/trains/overview.html">總概</a>
          
        </li>
        
        <li><a href="../../../zh_hk/trains/train_dat.html">The train.dat file</a>
          
        </li>
        
        <li><a href="../../../zh_hk/trains/train_xml.html">train.xml檔案</a>
          
        </li>
        
        
          
          <ul class="third">
            
            <li><a href="../../../zh_hk/trains/xml/sound.html">The sound.xml file</a>
              
            </li>
            
          </ul>
          
        </li>
        
        <li><a href="../../../zh_hk/trains/extensions_cfg.html">extensions.cfg 檔案</a>
          
        </li>
        
        <li><a href="../../../zh_hk/trains/panel_cfg.html">The panel.cfg file</a>
          
        </li>
        
        <li><a href="../../../zh_hk/trains/panel_animated.html">panel.animated 檔案</a>
          
        </li>
        
        <li><a href="../../../zh_hk/trains/panel2_cfg.html">The panel2.cfg file</a>
          
        </li>
        
        <li><a href="../../../zh_hk/trains/default_sounds.html">Default sounds</a>
          
        </li>
        
        <li><a href="../../../zh_hk/trains/openbveats.html">The OpenBveAts Plugin</a>
          
        </li>
        
        <li><a href="../../../zh_hk/trains/sound_cfg.html">The sound.cfg file</a>
          
        </li>
        
        <li><a href="../../../zh_hk/trains/ats_cfg.html"><strong>ats.cfg</strong> 檔案</a>
          
        </li>
        
        <li><a href="../../../zh_hk/trains/plugins.html">列車插件</a>
          
          <ul class="third">
            
            
              
            </li>
            
          </ul>
          
        </li>
        
        <li><a href="../../../zh_hk/trains/information.html">資料和貼士</a>
          
        </li>
        
        
          
        </li>
        
        
          
        </li>
        
        
          
        </li>
        
        
          
        </li>
        
      </ul>
      
    </li>
    
    <li>插件
      
      <ul class="second">
        
        <li><a href="../../../zh_hk/plugins/overview.html">總概</a>
          
        </li>
        
        
          
        </li>
        
        
          
        </li>
        
      </ul>
      
    </li>
    
    <li>信息
      
      <ul class="second">
        
        <li><a href="../../../zh_hk/information/encodings.html">字符編碼</a>
          
        </li>
        
        <li><a href="../../../zh_hk/information/numberformats.html">數字格式</a>
          
        </li>
        
        <li><a href="../../../zh_hk/information/whitespaces.html">空格</a>
          
        </li>
        
        <li><a href="../../../zh_hk/information/textureformats.html">材質格式</a>
          
        </li>
        
        <li><a href="../../../zh_hk/information/soundformats.html">Sound formats</a>
          
        </li>
        
        <li><a href="../../../zh_hk/information/standards.html">標準</a>
          
        </li>
        
        <li><a href="../../../zh_hk/information/distribution.html">發佈附加檔</a>
          
        </li>
        
        <li><a href="../../../zh_hk/information/forking.html">Fork準則</a>
          
        </li>
        
        <li><a href="../../../zh_hk/information/bve.html">對比BVE Trainsim</a>
          
        </li>
        
      </ul>
      
    </li>
    
    <li>工具
      
      <ul class="second">
        
        <li><a href="../../../zh_hk/tools/objectviewer.html">Object Viewer</a>
          
        </li>
        
        <li><a href="../../../zh_hk/tools/objectbender.html">Object Bender</a>
          
        </li>
        
        <li><a href="../../../zh_hk/tools/routeviewer.html">Route Viewer</a>
          
        </li>
        
        <li><a href="../../../zh_hk/tools/traineditor.html">列車編輯器 Train Editor</a>
          
        </li>
        
      </ul>
      
    </li>
    
    <li>詳細示例
      
      <ul class="second">
        
        <li><a href="../../../zh_hk/examples/demoroute.html">路綫説明</a>
          
        </li>
        
      </ul>
      
    </li>
    
  </ul>
</div>
</nav>

    </div>

    <div class="floating-action-button responsive-show" role="button" onclick="javascript:toggleMenu()">
        <i class="fas fa-bars" aria-hidden="true"></i>
    </div>

    <div id="container">

        <div id="page-title">
          <h1>Applying Dynamic Lighting to Your Route</h1>
        </div>

        




<div id="content">
  <p>This page describes the principles and implementation of the dynamic lighting system..</p>
<h2 id="-the-lighting-system-basic-principles">■ The Lighting System: Basic Principles</h2>
<p>First, please consider these fundamental points:</p>
<ul>
<li>openBVE currently supports two distinct lights for the scene. These are the <strong>Dynamic Light</strong> and the <strong>Ambient Light</strong>.</li>
<li>In addition to this, you must consider the <strong>Cab Brightness</strong> value, which determines the blend between the daytime and nighttime cab textures.</li>
<li>The current implementation of openBVE produces incorrect illumination on the back face of faces created by <em>Face2</em> (B3D) or <em>AddFace2</em> (CSV) commands.</li>
</ul>
<p><strong>NOTE:</strong> This behavior is subject to change in future versions of openBVE, so that both sides are correctly illuminated.</p>
<p>In order to setup the lighting system, a custom Dynamic Lighting XML file must be used. This file must contain a time-delineated series of light definitions, a basic example of which is shown below:</p>
<textarea rows="17" cols="110" style="border:2;">
  
&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;
&lt;openBVE xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34; xmlns:xsd=&#34;http://www.w3.org/2001/XMLSchema&#34;&gt;
  &lt;Brightness&gt;
        &lt;Time&gt;00.00&lt;/Time&gt;
        &lt;AmbientLight&gt;0,0,0&lt;/AmbientLight&gt;
        &lt;DirectionalLight&gt;0,0,0&lt;/DirectionalLight&gt;
        &lt;LightDirection&gt;0.223606797749979, 0.86602540378444, -0.447213595499958&lt;/LightDirection&gt;
        &lt;CabLighting&gt;80&lt;/CabLighting&gt;
  &lt;/Brightness&gt;
  &lt;Brightness&gt;
        &lt;Time&gt;12.00&lt;/Time&gt;
        &lt;AmbientLight&gt;160,160,160&lt;/AmbientLight&gt;
        &lt;DirectionalLight&gt;160,160,160&lt;/DirectionalLight&gt;
        &lt;LightDirection&gt;0.223606797749979, 0.86602540378444, -0.447213595499958&lt;/LightDirection&gt;
        &lt;CabLighting&gt;255&lt;/CabLighting&gt;
  &lt;/Brightness&gt;
&lt;/openBVE&gt;  

</textarea>
<p>As you can see, each <strong>&lt;Brightness&gt;</strong> section contains a series of parameters, defining the lighting at the point in time specified by <em>Time</em>.</p>
<p>When you are between two defined times, a simple cosine based interpolation curve is used.</p>
<h2 id="-the-ambient-light">■ The Ambient Light</h2>
<div id="command">
<strong>&lt;AmbientLight&gt;</strong> <em>RedValue</em>; <em>GreenValue</em>; <em>BlueValue</em> <strong>&lt;/AmbientLight&gt;</strong>
</div>
<p>The ambient light describes the <strong>R,G,B</strong> color, which is used to illuminate the whole scene.</p>
<p>All polygons in the scene are illuminated evenly.</p>
<h2 id="-the-directional-light">■ The Directional Light</h2>
<div id="command">
<strong>&lt;DirectionalLight&gt;</strong> <em>RedValue</em>; <em>GreenValue</em>; <em>BlueValue</em> <strong>&lt;/DirectionalLight&gt;</strong>
</div>
<p>The directional light describes the <strong>R,G,B</strong> color, which is used to illuminate the whole scene from a specified direction.</p>
<p>The polygons in the scene are only fully illuminated by the directional light if the light direction points at the front faces. If pointing at back faces, no light is contributed.</p>
<p>The <em>LightDirection</em> attribute should be used to set the direction the light shines from.</p>
<h2 id="-the-lightdirection-attribute">■ The LightDirection Attribute</h2>
<p>The LightDirection attribute sets the direction from which the directional light shines, by default in cartesian co-ordinates. There are three possible overloads for this as follows:</p>
<hr>
<p><em><strong>LightDirection</strong></em> : Sets the light direction in cartesian co-ordinates.</p>
<div id="command">
<strong>&lt;LightDirection&gt;</strong> <em>DirectionX</em>; <em>DirectionY</em>; <em>DirectionZ</em> <strong>&lt;/LightDirection&gt;</strong>
</div>
<hr>
<p><em><strong>CartesianLightDirection</strong></em> : Sets the light direction in cartesian co-ordinates.</p>
<div id="command">
<strong>&lt;CartesianLightDirection&gt;</strong> <em>DirectionX</em>; <em>DirectionY</em>; <em>DirectionZ</em> <strong>&lt;/CartesianLightDirection&gt;</strong>
</div>
<hr>
<p><em><strong>SphericalLightDirection</strong></em> : Sets the light direction in spherical co-ordinates.</p>
<div id="command">
<strong>&lt;SphericalLightDirection&gt;</strong> <em>Theta</em>; <em>Phi</em> <strong>&lt;/SphericalLightDirection&gt;</strong>
</div>
<h2 id="-the-cablighting-attribute">■ The CabLighting Attribute</h2>
<div id="command">
<strong>&lt;CabLighting&gt;</strong> <em>CabLightingValue</em> <strong>&lt;/CabLighting&gt;</strong>
</div>
<p>The CabLighting attribute controls the maximum brightness of the cab, which in turn is used to determine the blend between the daytime and nighttime images.</p>
<p>This must be a number between <em>0</em> (Completely dark) and <em>255</em> (Completely light).</p>
<p>The minimum of this value, and the current <strong>Track.Brightness</strong> value is then used to determine the cab brightness displayed in-game.</p>

</div>

      <div id="footer">

      </div>

    </div>

  </body>
</html>

